var vtagally=0.5;addDOMLoadEvent=(function(){var e=[],t,s,n,i,o,d=document,w=window,r='readyState',c='onreadystatechange',x=function(){n=1;clearInterval(t);while(i=e.shift())i();if(s)s[c]=''};return function(f){if(n)return f();if(!e[0]){d.addEventListener&&d.addEventListener("DOMContentLoaded",x,false);if(/WebKit/i.test(navigator.userAgent))t=setInterval(function(){/loaded|complete/.test(d[r])&&x()},10);o=w.onload;w.onload=function(){x();o&&o()}};e.push(f)}})();function JSONscriptRequest(fullUrl){this.fullUrl=fullUrl;this.noCacheIE='&noCacheIE='+(new Date()).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId='JscriptId'+JSONscriptRequest.scriptCounter++;};JSONscriptRequest.scriptCounter=1;JSONscriptRequest.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("charset","utf-8");this.scriptObj.setAttribute("src",this.fullUrl+this.noCacheIE);this.scriptObj.setAttribute("id",this.scriptId);};JSONscriptRequest.prototype.removeScriptTag=function(){try{this.headLoc.removeChild(this.scriptObj);}catch(e){}};JSONscriptRequest.prototype.addScriptTag=function(){try{this.headLoc.appendChild(this.scriptObj);}catch(e){}};var bObj;var inteTimer;var isdogetStrId=true;var stagid;var getarridnum;var getStartid;var shineStrArrlen;var keystra;var shinestra;var shinestraNo;var feistr="@$$@";var endlinelength;var thisstrlength;var dstrlength;var iou;var reurl;var getServTime;var letshineIDArr=new Array();var firstupdt=true;var shinerate=260;var getrdm=1500;var stimer=null;var haveNewTag=false;var blt;var toclr;var tobgclr="#FFF";var ipo=0;var firstT=true;var git=null;var pgit=null;var sid=null;var hvvj=0;var getweb=0;var getblog=0;var norelatedStr="<p style='color:#8C8C8C;font:normal normal 400 9pt/normal verdana,Arial,sans-serif;padding-left:3px'><strong>No related content found. </strong><br>If you are administrator, you may export your posts to share, please refer to help file.</p>";function $1(objString){return document.getElementById(objString);};function initData(){firstupdt=true;isdogetStrId=true;getarridnum=0;getStartid=0;shinestra="";shinestraNo="";shineStrArrlen=shiStrArr.length;feistr="@$$@";endlinelength=1000;thisstrlength=0;dstrlength=0;iou=0;stagid=-1;getServTime="0";};function doScrFun(reqUrl){bObj=new JSONscriptRequest(reqUrl);bObj.buildScriptTag();bObj.addScriptTag();};function GRupdatedtags(jsonData){try{var getvj=jsonData;var consuc=getvj.success;getServTime=getvj.rtime;if(consuc==true){haveNewTag=false;letshineIDArr=new Array();for(var i=0;i<=getvj.total-1;i++){letshineIDArr[i]=getvj.updates[i].tagr;};haveNewTag=true;if(firstT){doShineFov();};firstT=false;};bObj.removeScriptTag();}catch(e){}};function Gtd(jsonData){try{var getvj=jsonData;var giop="";for(var i=0;i<=getvj.total-1;i++){hvvj++;shiIDArr[parseInt(getvj.result[i].tno)]=getvj.result[i].tid;giop=$1("taly_"+getvj.result[i].tno);if(getvj.result[i].tid!="-1"){if(stagid==-1){stagid=getvj.result[i].tid;}else{stagid+=getvj.result[i].tid;};stagid+=",";giop.id="jax_"+getvj.result[i].tid;}else{iou--;}};bObj.removeScriptTag();if(hvvj==shineStrArrlen){stagid=stagid.substring(0,stagid.length-1);isdogetStrId=false;sendupdate();}}catch(e){}};function sendshineupdate(){doScrFun('http://www.tagally.com/main/GRupdatedtags?callback=getShine&tagids='+stagid+'&rtime='+getServTime+'&v='+vtagally);};function clearIntTimer(){clearInterval(inteTimer);};function getStrId(){thisstrlength=0;dstrlength=0;iou=getStartid;shinestra="";shinestraNo="";trulen=1000;while(trulen>=0){keystra=encodeURI(shiStrArr[iou++]);thisstrlength=keystra.length;if(dstrlength+thisstrlength>endlinelength){if(dstrlength==0){continue;}else{iou--;dstrlength=shinestra.length;break;}}else if(dstrlength+thisstrlength==endlinelength){shinestraNo+=(iou-1);shinestraNo+=feistr;shinestra+=keystra;shinestra+=feistr;break;}else{shinestraNo+=(iou-1);shinestraNo+=feistr;shinestra+=keystra;shinestra+=feistr;dstrlength=shinestra.length;};if(iou>=shineStrArrlen){break;};trulen--;};if(shinestraNo==""||shinestra==""){return;};reurl='http://www.tagally.com/main/Gtd?callback=Gtd&n='+encodeURI(shinestraNo)+'&t='+encodeURI(shinestra)+'&v='+vtagally;doScrFun(reurl);getStartid=iou;if(iou>=shineStrArrlen){return;}else{setTimeout(getStrId,1000);}};function sendupdate(){if(typeof(shiStrArr)=="undefined"){return;};if(shiStrArr.length==0){return;};if(isdogetStrId){initData();getStrId();}else{if(firstupdt){sendshineupdate();firstupdt=false;};inteTimer=setInterval(sendshineupdate,300000);}};addDOMLoadEvent(sendupdate);function doShineFov(){if(haveNewTag){git=Math.round((Math.random())*(parseInt(letshineIDArr.length-1)));if(pgit!=null){if(git==pgit){git=Math.round((Math.random())*(parseInt(letshineIDArr.length-1)));}};pgit=git;sid=$1("jax_"+letshineIDArr[git]);if(sid==null){return;};ipo=0;blt=sid;justShine();}else{setTimeout(doShineFov,getrdm);}};function justShine(){if(ipo==0){tobgclr=blt.style.color;};if(ipo==7){clearTimeout(stimer);stimer=null;setTimeout(doShineFov,getrdm);blt.style.color=toclr;blt.style.backgroundColor="transparent";return;};if(ipo%2==0){toclr=tobgclr;tobgclr="#FFF";}else{tobgclr=toclr;toclr="#FFF";};ipo++;blt.style.color=toclr;blt.style.backgroundColor=tobgclr;stimer=setTimeout('justShine()',shinerate);};function init(){tset_len=testArr.length-1;blt=$1(testArr[tset_len_a]);};var dropmenuobj;var tlastobj=null;var theselObj=null;var delayhidemu;var delayGetAjax;var tgnobj="";var tgimobj="";var toit="";var dldropmenu=null;function dropmenu(evt){try{var e=window.event?window.event:evt;theselObj=e.target||e.srcElement;if(tlastobj){if(tlastobj==theselObj){if(dropmenuobj.style.visibility=="visible"){clearhidemenu();return;}else{tlastobj=theselObj;}}else{tlastobj.style.textDecoration='none';tlastobj=theselObj;}}else{tlastobj=theselObj;};tlastobj.style.textDecoration='underline';lstv1=$1("tga_lart1");lstv2=$1("tga_lart2");hmcontv_1=$1("tga_tdpcon1");hmcontv_2=$1("tga_tdpcon2");hmtvloading=$1("tga_liDv");hmcontv_1.innerHTML="";hmcontv_2.innerHTML="";lstv1.innerHTML="";lstv2.innerHTML="";hmtvloading.style.display="block";clearhidemenu();cleargetAjaxUp();if(!dropmenuobj){dropmenuobj=$1("tga_dropmenu");tgnobj=$1("tga_tNY6IO");tgimobj=$1("tga_tNYIMU");};toit="";if(document.all){toit=theselObj.innerText;tgnobj.innerText=getTLenStr(toit,25);}else{toit=theselObj.textContent;tgnobj.textContent=getTLenStr(toit,25);};tgnobj.href=theselObj.href;var trueHf=tgimobj.href.substring(0,tgimobj.href.indexOf("tags=")+5);tgimobj.href=trueHf+encodeURI(toit);intY=0;intX=0;if(!document.all){winW=window.innerWidth;winH=window.innerHeight;curX=e.pageX-window.pageXOffset;curY=e.pageY-window.pageYOffset;intX=e.pageX;intY=e.pageY;}else{winW=document.documentElement.clientWidth;winH=document.documentElement.clientHeight;curX=event.clientX;curY=event.clientY;intX=document.documentElement.scrollLeft+e.clientX;intY=document.documentElement.scrollTop+e.clientY;};rgtW=winW-curX;vdpmtap=$1("tga_dpmtap");vdpms0=$1("tga_dpms_0");vdpmtap.style.backgroundPosition="0px 0px";vdpms0.style.borderTop="0px solid #898C95";vdpmtap.style.height="16px";if(rgtW<260){dropmenuobj.style.left=(intX-250)+"px";dropmenuobj.style.top=intY+"px";vdpmtap.style.backgroundPosition="0px -16px";}else{dropmenuobj.style.left=(intX-8)+"px";dropmenuobj.style.top=intY+"px";vdpmtap.style.backgroundPosition="0px 0px";};dropmenuobj.style.visibility="visible";delaygetAjaxUp(1);}catch(e){}};function gethotandlast(jsonData){try{lstv1=$1("tga_lart1");hmcontv_1=$1("tga_tdpcon1");hmtvloading=$1("tga_liDv");var getvj=jsonData;if(getvj==null||getvj.thelast[0]==null){hmtvloading.style.display="none";lstv1.style.display="none";hmcontv_1.style.display="block";hmcontv_1.innerHTML=norelatedStr;getweb=1;return;};var gtt="";var gtb="";var tmpstrp="";gtt=getTLenStr(getvj.thelast[0].thetitle,50);gtb=getTLenStr(getvj.thelast[0].theblog,20);tmpstrp="";tmpstrp=getvj.thelast[0].thetitle;tmpstrp=tmpstrp.concat(" (");tmpstrp=tmpstrp.concat(getvj.thelast[0].theblog);tmpstrp=tmpstrp.concat(")");lstv1.innerHTML="<a style='font-size:11px;color:#0033CC;word-break:break-all;width:250px;overflow:auto' href='"+getvj.thelast[0].theurl+"' title='"+tmpstrp+"' target='_blank'>"+gtt+"&nbsp; <span style='color:#008000;'>("+gtb+")</span></a>";var concatString,pp1,pp2;pp1="<UL>";for(var i=0;i<=getvj.thehot.length-1&&i<=5;i++){gtt="";gtb="";tmpstrp="";gtt=getTLenStr(getvj.thehot[i].thetitle,50);gtb=getTLenStr(getvj.thehot[i].theblog,20);pp2="<li><a class='dpli_a' style='color:#03c;padding-left:6px;word-break:break-all;width:250px;overflow:auto' target='_blank' title='";tmpstrp=(getvj.thehot[i].thetitle).replace(new RegExp("'",'g'),"&#039;");pp2=pp2.concat(tmpstrp);pp2=pp2.concat("&nbsp; (");tmpstrp=(getvj.thehot[i].theblog).replace(new RegExp("'",'g'),"&#039;");pp2=pp2.concat(tmpstrp);pp2=pp2.concat(")' href='");pp2=pp2.concat(getvj.thehot[i].theurl);pp2=pp2.concat("'>");pp2=pp2.concat(gtt);pp2=pp2.concat("&nbsp; <span style='color:#008000;'>(");pp2=pp2.concat(gtb);pp2=pp2.concat(")</span></a></li>");concatString=pp1.concat(pp2);pp1=concatString;};concatString=pp1.concat("</UL>");concatString=pp1.concat("<li><a target='_blank' href='http://www.tagally.com/main/GRTag?tag="+theselObj.id.substring(4,theselObj.id.length)+"&v="+vtagally+"' style='color:#FF903A;text-decoration:underline;' onmouseover='javascript:this.style.color=&quot;#913E00&quot;' onmouseout='javascript:this.style.color=&quot;#FF903A&quot;' title=''>more >></a></li>");pp1=concatString;hmcontv_1.innerHTML=concatString;hmcontv_1.style.display="block";hmcontv_2.style.display="none";getweb=1;gtt=null;gtb=null;tmpstrp=null;hmtvloading.style.display="none";lstv1.style.display="block";lstv2.style.display="none";bObj.removeScriptTag();}catch(e){}};function getmyhotandlast(jsonData){try{lstv2=$1("tga_lart2");hmcontv_2=$1("tga_tdpcon2");if(hmcontv_2==null){return;};hmtvloading=$1("tga_liDv");var getvj=jsonData;if(getvj==null||getvj.thelast[0]==null){hmtvloading.style.display="none";lstv2.style.display="none";hmcontv_2.style.display="block";hmcontv_2.innerHTML=norelatedStr;getblog=1;return;};var gtt="";var tmpstrp="";gtt=getTLenStr(getvj.thelast[0].thetitle,50);tmpstrp="";tmpstrp=getvj.thelast[0].thetitle;lstv2.innerHTML="<a style='font-size:11px;color:#0033CC;word-break:break-all;width:250px;overflow:auto' href='"+getvj.thelast[0].theurl+"' title='"+tmpstrp+"' target='_blank'>"+gtt+"</a>";var concatString,pp1,pp2;pp1="<UL>";for(var i=0;i<=getvj.thehot.length-1&&i<=5;i++){gtt="";tmpstrp="";gtt=getTLenStr(getvj.thehot[i].thetitle,50);pp2="<li><a target='_blank' class='dpli_a' style='color:#03c;padding-left:6px;word-break:break-all;width:250px;overflow:auto' title='";tmpstrp=(getvj.thehot[i].thetitle).replace(new RegExp("'",'g'),"&#039;");pp2=pp2.concat(tmpstrp);pp2=pp2.concat("'  href='");pp2=pp2.concat(getvj.thehot[i].theurl);pp2=pp2.concat("'>");pp2=pp2.concat(gtt);pp2=pp2.concat("</a></li>");concatString=pp1.concat(pp2);pp1=concatString;};concatString=pp1.concat("<li><a target='_blank' href='"+theselObj.href+"' style='color:#FF903A;text-decoration:underline;' onmouseover='javascript:this.style.color=&quot;#913E00&quot;' onmouseout='javascript:this.style.color=&quot;#FF903A&quot;' title=''>more >></a></li>");pp1=concatString;concatString=pp1.concat("</UL>");hmcontv_2.innerHTML=concatString;hmcontv_2.style.display="block";hmcontv_1.style.display="none";gtt=null;tmpstrp=null;hmtvloading.style.display="none";lstv2.style.display="block";lstv1.style.display="none";bObj.removeScriptTag();getblog=1;}catch(e){}};function getAjaxUp(getI){if(theselObj.id.substring(0,3)!="jax"){$1("tga_liDv").style.display="none";$1("tga_lart1").style.display="none";$1("tga_lart2").style.display="none";$1("tga_tdpcon1").innerHTML=norelatedStr;$1("tga_tdpcon2").innerHTML=norelatedStr;$1("tga_tdpcon2").style.display="block";getweb=1;getblog=1;return;};sendId=theselObj.id.substring(4,theselObj.id.length);req=null;if(getI==1){blogurl=encodeURIComponent(document.location.host+document.location.pathname);req="http://www.tagally.com/main/GRHotLastForTagBlog?callback=getmyhotandlast&v="+vtagally+"&tag="+sendId+"&u="+blogurl;}else if(getI==0){req="http://www.tagally.com/main/GRHotandLastForTag/"+sendId+"?callback=gethotandlast&v="+vtagally;};bObj=new JSONscriptRequest(req);bObj.buildScriptTag();bObj.addScriptTag();};function delaygetAjaxUp(gi,dltime){$1("tga_lart1").style.display="none";$1("tga_lart2").style.display="none";if(!dltime){dltime=800;};if(dltime==0){getAjaxUp(gi);}else{delayGetAjax=setTimeout("getAjaxUp("+gi+")",dltime);}};function cleargetAjaxUp(){getweb=0;getblog=0;$1("tga_tdpcon1").style.display="none";$1("tga_tdpcon2").style.display="none";$1("tga_tgda1").className="tgdac_2";$1("tga_tgda2").className="tgdac_1";clearonlygetAjaxUp();};function clearonlygetAjaxUp(){if(delayGetAjax){clearTimeout(delayGetAjax);}};function hidemenu(){tlastobj.style.textDecoration='none';if(dropmenuobj==null){return;};dropmenuobj.style.visibility="hidden";cleargetAjaxUp();};function delayhidemenu(){delayhidemu=setTimeout("hidemenu()",500);};function clearhidemenu(){if(delayhidemu){clearTimeout(delayhidemu);}};function getTLenStr(str,tleng){var tmp=0;var len=0;var okLen=0;var tmslen=str.length;for(var i=0;i<tleng;i++){if(str.charCodeAt(i)>255){tmp+=2;}else{len+=1;};okLen+=1;if(tmp+len==tleng){if(tmslen>tleng){var tmsk=str.substring(0,okLen);tmsk=tmsk.concat("...");return(tmsk);}else{return(str.substring(0,okLen));};break;};if(tmp+len>tleng){var tmst=str.substring(0,okLen-1);tmst=tmst.concat("...");return(tmst);break;}}};var setdpdl=null;function delaydphdq(ynum){setdpdl=setTimeout("dphdq("+ynum+")",300);};function cleardelaydphdq(){if(setdpdl){clearTimeout(setdpdl);}};function dphdq(ynum){if(ynum==0){$1("tga_tgda1").className="tgdac_1";$1("tga_tgda2").className="tgdac_2";$1("tga_tdpcon1").style.display="block";$1("tga_tdpcon2").style.display="none";if($1("tga_lart1").innerHTML!=""){$1("tga_lart1").style.display="block";};$1("tga_lart2").style.display="none";if(getweb==1){return;}}else if(ynum==1){$1("tga_tgda1").className="tgdac_2";$1("tga_tgda2").className="tgdac_1";$1("tga_tdpcon1").style.display="none";$1("tga_tdpcon2").style.display="block";$1("tga_lart1").style.display="none";if($1("tga_lart2").innerHTML!=""){$1("tga_lart2").style.display="block";};if(getblog==1){return;}};$1("tga_tdpcon1").style.display="none";$1("tga_tdpcon2").style.display="none";clearonlygetAjaxUp();$1("tga_liDv").style.display="block";delaygetAjaxUp(ynum,0);}
